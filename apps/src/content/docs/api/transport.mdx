---
title: Transport API
description: Complete reference for DyneMCP transport system and protocols
---

# Transport API Reference

The Transport API handles communication between MCP clients and the server. DyneMCP supports multiple transport protocols.

## Built-in Transports

DyneMCP includes two built-in transport types:

1. stdio (Default)
2. HTTP Stream

## Transport Interface

```typescript
interface Transport {
  connect(server: McpServer): Promise<void>
  disconnect?(): Promise<void>
}
```

## Transport Configuration

### stdio Transport

The stdio transport is the default and simplest transport type. It uses standard input/output for communication.

```typescript
interface StdioTransportConfig {
  type: 'stdio'
  // No additional options required
}
```

Example:

```json
{
  "transport": {
    "type": "stdio"
  }
}
```

### HTTP Stream Transport

The HTTP Stream transport provides a streaming HTTP interface for real-time communication.

```typescript
interface HTTPStreamTransportConfig {
  type: 'http-stream'
  options: {
    port?: number
    host?: string
    endpoint?: string
    cors?: CORSOptions
    authentication?: {
      path: string
    }
  }
}
```

Example:

```json
{
  "transport": {
    "type": "http-stream",
    "options": {
      "port": 3000,
      "host": "localhost",
      "endpoint": "/mcp",
      "authentication": {
        "path": "./src/auth.ts"
      }
    }
  }
}
```

## Authentication

The HTTP Stream transport supports custom authentication middleware:

```typescript
// auth.ts
import { Request, Response, NextFunction } from 'express'

export default function authenticate(
  req: Request,
  res: Response,
  next: NextFunction
) {
  const token = req.headers.authorization

  if (!token || !isValidToken(token)) {
    return res.status(401).json({ error: 'Unauthorized' })
  }

  next()
}
```

## CORS Configuration

For HTTP Stream transport, you can configure CORS options:

```typescript
interface CORSOptions {
  origin?: string | string[]
  methods?: string[]
  allowedHeaders?: string[]
  exposedHeaders?: string[]
  credentials?: boolean
  maxAge?: number
}
```

Example:

```json
{
  "transport": {
    "type": "http-stream",
    "options": {
      "port": 3000,
      "endpoint": "/mcp",
      "cors": {
        "origin": "*",
        "methods": ["GET", "POST"],
        "allowedHeaders": ["Content-Type", "Authorization"]
      }
    }
  }
}
```

## Environment Variables

The following environment variables can override transport configuration:

- `DYNEMCP_TRANSPORT`: Transport type ('stdio' or 'http-stream')
- `DYNEMCP_PORT`: HTTP Stream transport port
- `DYNEMCP_HOST`: HTTP Stream transport host

## Best Practices

1. **Transport Selection**

   - Use stdio for CLI tools and local development
   - Use HTTP Stream for web applications and distributed systems

2. **Security**

   - Always implement authentication for HTTP Stream in production
   - Configure CORS appropriately for your use case
   - Use HTTPS in production environments

3. **Error Handling**

   - Implement proper error handling in authentication middleware
   - Handle connection errors gracefully
   - Provide meaningful error messages to clients

4. **Performance**
   - Configure appropriate timeouts
   - Monitor connection health
   - Implement retry mechanisms for failed connections

## Examples

### Basic stdio Server

```typescript
import { createMCPServer } from '@dynemcp/dynemcp'

const server = createMCPServer()
await server.start() // Uses stdio transport by default
```

### HTTP Stream Server with Authentication

```typescript
import { createMCPServer } from '@dynemcp/dynemcp'

const server = createMCPServer('my-server', {
  transport: {
    type: 'http-stream',
    options: {
      port: 3000,
      endpoint: '/mcp',
      authentication: {
        path: './src/auth.ts',
      },
      cors: {
        origin: 'https://app.example.com',
        methods: ['GET', 'POST'],
      },
    },
  },
})

await server.start()
```
